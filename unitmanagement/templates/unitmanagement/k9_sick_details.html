{% extends "profiles/sidebar_um.html" %}

{% block content %}
<div class="ui inverted segment" style="padding:20px;">
    <h3 class="ui header">{{ title }}</h3>
    {% if messages %}
        {% for message in messages %}
            <div class="{{style}}" > {{ message }}</div>
        {% endfor %}
    {% endif %}
</div>
<div class="ui raised segment">
    <table class="ui collapse table">
        <thead>
            <tr>
                <th>K9</th>
                <td>{{data.k9}}</td>
                <th>Date</th>
                <td>{{data.date}}</td>
            </tr>
            <tr>
                <th>Remarks</th>
                <td class="nine wide">{{data.description}}</td>
                <th>Reported by:</th>
                <td>{{data.reported_by}}</td>
            </tr>
        </thead>
    </table>
    <br>
    <div class="ui grid">
        {% for image in image%}
            <div class="five wide column center aligned">
                <img src="{{image.image.url}}" alt="" style="position:relative;max-width: 300px;">
            </div>
        {%endfor%}
    </div>
</div>
{% if user.position == 'Veterinarian' %}
<div class="ui inverted segment">
    <form class="ui inverted form" method="POST" id="myForm" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="field">
                <label>Problem</label>
                {{form.problem}}
            </div>
        <div class="field">
            <label>Treatment</label>
            {{form.treatment}}
        </div>
        <div class="three fields">
            <div class="field">
                <label>Prescription Image (if any)</label>
                {{form.image}}
            </div>
            <div class="field"></div>
            <div class="field"></div>
        </div>
        <table>
            <tbody>
            {% for form in formset %}
            <tr id="{{ form.prefix }}-row" class="formset_class">
                {% for field in form.hidden_fields %}{{ field }}{% endfor %}
                {% for field in form.visible_fields %}
                {% if form.visible_fields.instance.pk %} {{ form.visible_fields.DELETE }}{% endif %}
                        <span class ="text-danger small">{{field.errors}}</span>
                        <th>{{field.label_tag}}</th>
                        <td>{{field}}</td>
        
                        {% for item in item %}
                        <option value="{{ item.id }}">{{ item.item_name }}</option>
                        {% endfor %}
                {% endfor %}
            </tr>
            {% endfor %}
            </tbody>
        </table>

        <div class="ui inverted right aligned segment" style="padding: 0px;">
            <button onclick="return confirm('Are you sure?')" class = "ui button green" type="submit" >{{ actiontype }}</button>
        </div>
        {{formset.management_form}}
    </form>
</div>
{% endif %}
<script type="text/javascript">

    $(document).ready(function() {
        $('#tabledata1').DataTable();
        $('.menu .item').tab();
        $(function() {
            $('#myForm .formset_class').formset({
                prefix: '{{ formset.prefix }}'
            });            
        })
    });

</script>
 {% endblock %}