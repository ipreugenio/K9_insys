{% extends "profiles/sidebar_pa.html" %} {% block content %}
{% load pa_tags %}

<h2 class="ui header">
  K9 Breeding
  <div class="sub header">Input K9 breeding data here</div>
</h2>

<div class="ui ordered steps">
  <div class="active step">
    <div class="content">
      <div class="title">K9 Parents Form</div>
      <div class="description">Select K9 Parents</div>
    </div>
  </div>
  <div class="disabled step">
    <div class="content">
      <div class="title">Confirm Parents</div>
      <div class="description">Verify selected parents</div>
    </div>
  </div>
</div>
    {% if messages %}
        {% for message in messages %}
            <div class="{{ style }} row"> {{ message }}</div>
        {% endfor %}
    {% endif %}
<form class = "ui form" action="" method="post">
  {% csrf_token %}
<div class="ui two column grid">
  <div class="column">
     <center>
       <h4 class='ui horizontal divider header'>Dam (Mother)</h4>
     </center>

      <table id="tabledata1" class="ui eight column inverted pink celled small table">
            <thead>
                <tr>
                    <th></th>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Breed</th>
                    <th>Capability</th>
                    <th>Birth Success</th>
                    <th>Litter</th>
                    <th>Sick Record</th>
                </tr>
            </thead>
    
            <tbody>
    
                {% for m, s, b in mlist %}
                <tr>
                    <td class="center aligned"> 
                        <input type="radio" id="radiom" name="radiom" value="{{m.id}}">
                    </td>
                    <td>
                        <a href="#" class="show_modal" id='{{m.id}}' style="color:powderblue;">{{m.name}}</a>
                    </td>
                    <td>{{m.age}}</td>
                    <td>{{m.breed}}</td>
                    <td>{{m.capability}}</td>
                    <td>{{b}}%</td>
                    <td>{{m.litter_no}}</td>
                    <td>{{s}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
  </div>

    <div class="column" id = 'id_father_data'>
      <center>
        <h4 class='ui horizontal divider header'>Sire (Father)</h4>
      </center>
    </div>
</div>
  <div class="ui center aligned basic segment" style="padding: 0px;">
      <button id = "submit" class = "ui button green" type="submit" >Next Step</button>
  </div>
</form>

<script type="text/javascript">

	$(document).ready(function() {
		$('#tabledata1').DataTable({
      "order": [[ 5, "desc" ],[ 6, "desc" ],[ 7, "asc" ]]
    });
		$('.menu .item').tab();

    $('.ui.radiom.checkbox').checkbox();       
	});

  $("input[name='radiom']").change(function () {
        var url = 'ajax_load_k9_reco';  
        var id = $("input[name='radiom']:checked"). val();
        
        $.ajax({                       
        url: url,                    
        data: {
            'id': id      
        },
        success: function (data) {   
            $("#id_father_data").html(data);  
        }
        });
    });

    $(".show_modal" ).bind('click', function() {
            var id = $(this).attr('id')
            var k9 = $(this).text();
            $('#id_health_data').modal('show');
            $('.header').text(id);
            
            var url = 'ajax_load_health';  
            $('#id_health_data').modal('show');

            $.ajax({                      
                url: url,                    
                data: {
                'id': id,
                'k9': k9,      
                },
                success: function (data) {   
                $("#id_health_data").html(data); 
                }
            });

        });

</script>

{% endblock %}
