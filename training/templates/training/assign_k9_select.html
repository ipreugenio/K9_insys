{% extends "profiles/sidebar_training.html" %}

{% block content %}
<div class="ui inverted segment" style="padding:20px;">
    <h3 class="ui header">{{ Title }}</h3>
    {% if messages %}
        {% for message in messages %}
            <div class="ui green message" > {{ message }}</div>
        {% endfor %}
    {% endif %}
</div>

<div class="ui very padded segment">
    <label>Assign handler to k9</label>
    <form class = "ui inverted fluid form" method="POST">
 {% csrf_token %}
                <div class="ui fluid container">
                  <div class="field">
                        {{form.handler}}
                    </div>
                </div>

        <div class="ui center aligned basic segment" style="padding: 0px;">
        <button id = "submit" class = "ui button green" type="submit" >Submit</button>
        </div>

    </form>
</div>

<div id = "id_handler_data"></div>

<script type="text/javascript">

    $(document).ready(function() {
        $('#tabledata').DataTable();

    } );
</script>

<script>
    $("#id_handler").change(function () {
      var url = 'ajax_load_handler';  // get the url of the `load_handler` view
      var handlerId = $(this).val();  // get the selected handler ID from the HTML input

      $.ajax({                       // initialize an AJAX request
        url: url,                    // set the url of the request
        data: {
          'handler': handlerId       // add the handler id to the GET parameters
        },
        success: function (data) {   // `data` is the return of the `load_handler` view function
          $("#id_handler_data").html(data);  // replace the contents of the #id_handler_data input with the data that came from the server
        }
      });

    });
  </script>

 {% endblock %}
